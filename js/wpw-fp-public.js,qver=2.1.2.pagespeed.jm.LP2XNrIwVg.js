"use strict";jQuery(document).ready(function($){$(document).on("click",".wpw-fp-follow-post-wrapper .wpw-fp-guest-btn",function(){var follow_wrapper=$(this).parents('.wpw-fp-follow-post-wrapper');var follow_wrapper_obj={this_object:follow_wrapper};follow_wrapper.trigger("wpw-fp-guest-btn-click",[follow_wrapper_obj]);follow_wrapper.find('.wpw-fp-followsemail').val('').removeClass('wpw_fp_email_error');follow_wrapper.find('.wpw_fp_follow_email_error').hide();follow_wrapper.find('.wpw-fp-follow-post-popup').slideDown('slow');follow_wrapper.find('.wpw-fp-post-popup-overlay').fadeIn('slow');});$(document).on("click",".wpw-fp-follow-post-wrapper .wpw-fp-follow-btn",function(){var onlyfollowing=$(this).parents('.wpw-fp-manage-follow-posts').data('only-following');var status=$(this).attr('data-status');var postid=$(this).attr('data-postid');var currentpostid=$(this).attr('data-current-postid');var follow=$(this).attr('data-follow-text');var following=$(this).attr('data-following-text');var unfollow=$(this).attr('data-unfollow-text');var email='';var is_error=false;var follow_button_obj={popup:true,error:false,this_object:this};$(this).trigger("wpw-fp-follow-btn-click",[follow_button_obj]);var follow_wrapper=$(this).parents('.wpw-fp-follow-post-wrapper');if(follow_wrapper.find('.wpw-fp-followsemail').is(':visible')){follow_wrapper.find('.wpw_fp_follow_email_error').html('').hide();follow_wrapper.find('.wpw_fp_follow_gdpr_error').html('').hide();follow_wrapper.find('.wpw-fp-followsemail').removeClass('wpw_fp_email_error');email=follow_wrapper.find('.wpw-fp-followsemail').val();email=$.trim(email);if(email==''){follow_wrapper.find('.wpw_fp_follow_email_error').html(WpwFpPublic.emailempty).show();follow_wrapper.find('.wpw-fp-followsemail').addClass('wpw_fp_email_error');return false;}else{if(!wpw_fp_valid_email(email)){follow_wrapper.find('.wpw_fp_follow_email_error').html(WpwFpPublic.emailinvalid).show();follow_wrapper.find('.wpw-fp-followsemail').addClass('wpw_fp_email_error');return false;}}if($(this).parentsUntil('.wpw-fp-privacy-text').find('.wpw_fp_options_gdpr_enable').length){if(!$(this).parentsUntil('.wpw-fp-privacy-text').find('.wpw_fp_options_gdpr_enable').is(":checked")){follow_wrapper.find('.wpw_fp_follow_gdpr_error').html(WpwFpPublic.gdpr).show();return false;}else{follow_wrapper.find('.wpw_fp_follow_gdpr_error').html(WpwFpPublic.gdpr).hide();}}}if(!follow_button_obj.popup){return false;}if(follow_button_obj.error){return false;}if(status=='1'){follow_wrapper.find('.wpw-following-text').html(following);follow_wrapper.find('.wpw-following-text').removeClass('wpw-fp-display-none');follow_wrapper.find('.wpw-unfollowing-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');}else{follow_wrapper.find('.wpw-fp-follow-btn').addClass('wpw-fp-follow-button').removeClass('wpw-fp-following-button');follow_wrapper.find('.wpw-following-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');follow_wrapper.find('.wpw-unfollowing-text').removeClass('wpw-fp-display-none').addClass('wpw-fp-display-inline');}var form=follow_wrapper.find(".wpw_fp_follow_form");var disable_reload=(follow_wrapper.find('.wpw-fp-guest-btn').hasClass('disable-reload')||follow_wrapper.parents('.widget').length>0);var data={action:'wpw_fp_follow_post',status:status,postid:postid,currentpostid:currentpostid,email:email,onlyfollowing:onlyfollowing,data:form.serialize()};if(disable_reload){data.disable_reload=true;}follow_wrapper.find('.wpw_fp_follow_loader').show();follow_wrapper.find('.wpw-following-text').html(WpwFpPublic.processing);follow_wrapper.find('.wpw-unfollowing-text').html(WpwFpPublic.processing);jQuery.post(WpwFpPublic.ajaxurl,data,function(response){follow_wrapper.find('.wpw_fp_follow_loader').hide();if(response!='confirm'){if($.isNumeric(response)){follow_wrapper.find('.wpw_fp_followers_count').html(response);}if(WpwFpPublic.loginflag=='1'){if(status=='1'){follow_wrapper.find('.wpw-following-text').html(following);follow_wrapper.find('.wpw-fp-follow-btn').attr('data-status','0');follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-follow-button').addClass('wpw-fp-following-button');}else{if(onlyfollowing==1){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-posts').html();jQuery('.wpw-fp-manage-follow-posts').html(newresponse);}else{follow_wrapper.find('.wpw-following-text').html(follow);follow_wrapper.find('.wpw-fp-follow-btn').attr('data-status','1');follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-following-button').addClass('wpw-fp-follow-button');}}}else{follow_wrapper.find('.wpw-following-text').html(follow);follow_wrapper.find('.wpw-unfollowing-text').html(unfollow);follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-following-button').addClass('wpw-fp-follow-button');if(disable_reload){if(!$.isNumeric(response)){$('.message_stack_success, .message_stack_error').remove();$('<div class="message_stack_error">'+response+'<div>').insertBefore(follow_wrapper);}else{$('.message_stack_success, .message_stack_error').remove();$('<div class="message_stack_success">'+WpwFpPublic.follow_success+'<div>').insertBefore(follow_wrapper);}if(follow_wrapper.find('.wpw-fp-popup-close').length>0){follow_wrapper.find('.wpw-fp-popup-close').click();}}else{var msgs={};if(!$.isNumeric(response)){msgs={postid:postid,msgs:response};}else{msgs={postid:postid,msgs:WpwFpPublic.follow_success}}Cookies.set('wpw-fp-follow-post-msgs',JSON.stringify(msgs));window.location.reload();}}}else{if(WpwFpPublic.loginflag=='1'||disable_reload){$('.message_stack_success').remove();$('<div class="message_stack_success">'+WpwFpPublic.checkemail+'<div>').insertBefore(follow_wrapper);follow_wrapper.find('.wpw-following-text').html(follow);if(follow_wrapper.find('.wpw-fp-popup-close').length>0){follow_wrapper.find('.wpw-fp-popup-close').click();}}else{var msgs={postid:postid,msgs:WpwFpPublic.checkemail};Cookies.set('wpw-fp-follow-post-msgs',JSON.stringify(msgs));follow_wrapper.find('.wpw-following-text').html(follow);window.location.reload();}}var follow_wrapper_obj={this_object:follow_wrapper};follow_wrapper.trigger("wpw-fp-follow-btn-reload",[follow_wrapper_obj]);follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-unfollow-button').addClass('wpw-fp-follow-button');follow_wrapper.find('.wpw-following-text').removeClass('wpw-fp-display-none');follow_wrapper.find('.wpw-unfollowing-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');follow_wrapper.find('.wpw-unfollowing-text').html(unfollow);});});var postMsgs=Cookies.get('wpw-fp-follow-post-msgs');if(postMsgs){var msgs=$.parseJSON(postMsgs);var thisObj=$('button[data-postid="'+msgs.postid+'"]');var follow_wrapper=thisObj.parents('.wpw-fp-follow-post-wrapper');$('<div class="message_stack_success">'+msgs.msgs+'<div>').insertBefore(follow_wrapper);Cookies.remove('wpw-fp-follow-post-msgs');}$(document).on("click",".wpw-fp-follow-term-wrapper .wpw-fp-guest-btn",function(){var follow_wrapper=$(this).parents('.wpw-fp-follow-term-wrapper');var follow_wrapper_obj={this_object:follow_wrapper};follow_wrapper.trigger("wpw-fp-term-guest-btn-click",[follow_wrapper_obj]);follow_wrapper.find('.wpw-fp-followsemail').val('').removeClass('wpw_fp_email_error');follow_wrapper.find('.wpw_fp_follow_email_error').hide();follow_wrapper.find('.wpw-fp-follow-term-popup').slideDown('slow');follow_wrapper.find('.wpw-fp-term-popup-overlay').fadeIn('slow');});$(document).on("click",".wpw-fp-follow-author-wrapper .wpw-fp-guest-btn",function(){var follow_wrapper=$(this).parents('.wpw-fp-follow-author-wrapper');var follow_wrapper_obj={this_object:follow_wrapper};follow_wrapper.trigger("wpw-fp-author-guest-btn-click",[follow_wrapper_obj]);follow_wrapper.find('.wpw-fp-followsemail').val('').removeClass('wpw_fp_email_error');follow_wrapper.find('.wpw_fp_follow_email_error').hide();follow_wrapper.find('.wpw-fp-follow-author-popup').slideDown('slow');follow_wrapper.find('.wpw-fp-author-popup-overlay').fadeIn('slow');});$(document).on("click",".wpw-fp-follow-term-wrapper .wpw-fp-follow-btn",function(){var onlyfollowing=$(this).parents('.wpw-fp-manage-follow-terms').data('only-following');var status=$(this).attr('data-status');var posttype=$(this).attr('data-posttype');var taxonomyslug=$(this).attr('data-taxonomy-slug');var termid=$(this).attr('data-term-id');var currentpostid=$(this).attr('data-current-postid');var follow=$(this).attr('data-follow-text');var following=$(this).attr('data-following-text');var unfollow=$(this).attr('data-unfollow-text');var email='';var follow_button_obj={popup:true,error:false,this_object:this};$(this).trigger("wpw-fp-follow-term-btn-click",[follow_button_obj]);var follow_wrapper=$(this).parents('.wpw-fp-follow-term-wrapper');if(follow_wrapper.find('.wpw-fp-followsemail').is(':visible')){follow_wrapper.find('.wpw_fp_follow_email_error').html('').hide();follow_wrapper.find('.wpw_fp_follow_gdpr_error').html('').hide();follow_wrapper.find('.wpw-fp-followsemail').removeClass('wpw_fp_email_error');email=follow_wrapper.find('.wpw-fp-followsemail').val();email=$.trim(email);if(email==''){follow_wrapper.find('.wpw_fp_follow_email_error').html(WpwFpPublic.emailempty).show();follow_wrapper.find('.wpw-fp-followsemail').addClass('wpw_fp_email_error');return false;}else{if(!wpw_fp_valid_email(email)){follow_wrapper.find('.wpw_fp_follow_email_error').html(WpwFpPublic.emailinvalid).show();follow_wrapper.find('.wpw-fp-followsemail').addClass('wpw_fp_email_error');return false;}}if($(this).parentsUntil('.wpw-fp-privacy-text').find('.wpw_fp_options_gdpr_enable').length){if(!$(this).parentsUntil('.wpw-fp-privacy-text').find('.wpw_fp_options_gdpr_enable').is(":checked")){follow_wrapper.find('.wpw_fp_follow_gdpr_error').html(WpwFpPublic.gdpr).show();return false;}else{follow_wrapper.find('.wpw_fp_follow_gdpr_error').html(WpwFpPublic.gdpr).hide();}}}if(!follow_button_obj.popup){return false;}if(follow_button_obj.error){return false;}if(status=='1'){follow_wrapper.find('.wpw-following-text').html(following);follow_wrapper.find('.wpw-following-text').removeClass('wpw-fp-display-none');follow_wrapper.find('.wpw-unfollowing-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');}else{follow_wrapper.find('.wpw-fp-follow-btn').addClass('wpw-fp-follow-button').removeClass('wpw-fp-following-button');follow_wrapper.find('.wpw-following-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');follow_wrapper.find('.wpw-unfollowing-text').removeClass('wpw-fp-display-none').addClass('wpw-fp-display-inline');}var form=follow_wrapper.find(".wpw_fp_follow_form");var disable_reload=(follow_wrapper.find('.wpw-fp-guest-btn').hasClass('disable-reload')||follow_wrapper.parents('.widget').length>0);var data={action:'wpw_fp_follow_term',status:status,posttype:posttype,taxonomyslug:taxonomyslug,termid:termid,currentpostid:currentpostid,email:email,onlyfollowing:onlyfollowing,data:form.serialize()};if(disable_reload){data.disable_reload=true;}follow_wrapper.find('.wpw_fp_follow_loader').show();follow_wrapper.find('.wpw-following-text').html(WpwFpPublic.processing);follow_wrapper.find('.wpw-unfollowing-text').html(WpwFpPublic.processing);jQuery.post(WpwFpPublic.ajaxurl,data,function(response){follow_wrapper.find('.wpw_fp_follow_loader').hide();if(response!='confirm'){if($.isNumeric(response)){follow_wrapper.find('.wpw_fp_followers_count').html(response);}if(WpwFpPublic.loginflag=='1'){if(status=='1'){follow_wrapper.find('.wpw-following-text').html(following);follow_wrapper.find('.wpw-fp-follow-btn').attr('data-status','0');follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-follow-button').addClass('wpw-fp-following-button');}else{if(onlyfollowing==1){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-terms').html();jQuery('.wpw-fp-manage-follow-terms').html(newresponse);}else{follow_wrapper.find('.wpw-following-text').html(follow);follow_wrapper.find('.wpw-fp-follow-btn').attr('data-status','1');follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-following-button').addClass('wpw-fp-follow-button');}}}else{follow_wrapper.find('.wpw-following-text').html(follow);follow_wrapper.find('.wpw-unfollowing-text').html(unfollow);follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-following-button').addClass('wpw-fp-follow-button');if(disable_reload){if(!$.isNumeric(response)){$('.message_stack_success, .message_stack_error').remove();$('<div class="message_stack_error">'+response+'<div>').insertBefore(follow_wrapper);}else{$('.message_stack_success, .message_stack_error').remove();$('<div class="message_stack_success">'+WpwFpPublic.follow_success+'<div>').insertBefore(follow_wrapper);}if(follow_wrapper.find('.wpw-fp-popup-close').length>0){follow_wrapper.find('.wpw-fp-popup-close').click();}}else{var msgs={};if(!$.isNumeric(response)){msgs={termid:termid,msgs:response};}else{msgs={termid:termid,msgs:WpwFpPublic.follow_success}}Cookies.set('wpw-fp-follow-term-msgs',JSON.stringify(msgs));window.location.reload();}}}else{if(WpwFpPublic.loginflag=='1'||disable_reload){$('.message_stack_success').remove();$('<div class="message_stack_success">'+WpwFpPublic.checkemail+'<div>').insertBefore(follow_wrapper);follow_wrapper.find('.wpw-following-text').html(follow);if(follow_wrapper.find('.wpw-fp-popup-close').length>0){follow_wrapper.find('.wpw-fp-popup-close').click();}}else{var msgs={termid:termid,msgs:WpwFpPublic.checkemail};Cookies.set('wpw-fp-follow-term-msgs',JSON.stringify(msgs));follow_wrapper.find('.wpw-following-text').html(follow);window.location.reload();}}var follow_wrapper_obj={this_object:follow_wrapper};follow_wrapper.trigger("wpw-fp-follow-term-btn-reload",[follow_wrapper_obj]);follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-unfollow-button').addClass('wpw-fp-follow-button');follow_wrapper.find('.wpw-following-text').removeClass('wpw-fp-display-none');follow_wrapper.find('.wpw-unfollowing-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');follow_wrapper.find('.wpw-unfollowing-text').html(unfollow);});});var termMsgs=Cookies.get('wpw-fp-follow-term-msgs');if(termMsgs){var msgs=$.parseJSON(termMsgs);var thisObj=$('button[data-term-id="'+msgs.termid+'"]');var follow_wrapper=thisObj.parents('.wpw-fp-follow-term-wrapper');$('<div class="message_stack_success">'+msgs.msgs+'<div>').insertBefore(follow_wrapper);Cookies.remove('wpw-fp-follow-term-msgs');}$(document).on('click','.wpw-fp-follow-author-wrapper .wpw-fp-follow-btn',function(){var onlyfollowing=$(this).parents('.wpw-fp-manage-follow-authors').data('only-following');var status=$(this).attr('data-status');var authorid=$(this).attr('data-author-id');var currentpostid=$(this).attr('data-current-postid');var follow=$(this).attr('data-follow-text');var following=$(this).attr('data-following-text');var unfollow=$(this).attr('data-unfollow-text');var email='';var follow_button_obj={popup:true,error:false,this_object:this};$(this).trigger("wpw-fp-follow-author-btn-click",[follow_button_obj]);var follow_wrapper=$(this).parents('.wpw-fp-follow-author-wrapper');email=follow_wrapper.find('.wpw-fp-followsemail').val();if(follow_wrapper.find('.wpw-fp-followsemail').is(':visible')){follow_wrapper.find('.wpw_fp_follow_email_error').html('').hide();follow_wrapper.find('.wpw_fp_follow_gdpr_error').html('').hide();follow_wrapper.find('.wpw-fp-followsemail').removeClass('wpw_fp_email_error');email=follow_wrapper.find('.wpw-fp-followsemail').val();email=$.trim(email);if(email==''){follow_wrapper.find('.wpw_fp_follow_email_error').html(WpwFpPublic.emailempty).show();follow_wrapper.find('.wpw-fp-followsemail').addClass('wpw_fp_email_error');return false;}else{if(!wpw_fp_valid_email(email)){follow_wrapper.find('.wpw_fp_follow_email_error').html(WpwFpPublic.emailinvalid).show();follow_wrapper.find('.wpw-fp-followsemail').addClass('wpw_fp_email_error');return false;}}if($(this).parentsUntil('.wpw-fp-privacy-text').find('.wpw_fp_options_gdpr_enable').length){if(!$(this).parentsUntil('.wpw-fp-privacy-text').find('.wpw_fp_options_gdpr_enable').is(":checked")){follow_wrapper.find('.wpw_fp_follow_gdpr_error').html(WpwFpPublic.gdpr).show();return false;}else{follow_wrapper.find('.wpw_fp_follow_gdpr_error').html(WpwFpPublic.gdpr).hide();}}}if(!follow_button_obj.popup){return false;}if(follow_button_obj.error){return false;}if(status=='1'){follow_wrapper.find('.wpw-following-text').html(following);follow_wrapper.find('.wpw-following-text').removeClass('wpw-fp-display-none');follow_wrapper.find('.wpw-unfollowing-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');}else{follow_wrapper.find('.wpw-fp-follow-btn').addClass('wpw-fp-follow-button').removeClass('wpw-fp-following-button');follow_wrapper.find('.wpw-following-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');follow_wrapper.find('.wpw-unfollowing-text').removeClass('wpw-fp-display-none').addClass('wpw-fp-display-inline');}var form=follow_wrapper.find(".wpw_fp_follow_form");var disable_reload=(follow_wrapper.find('.wpw-fp-guest-btn').hasClass('disable-reload')||follow_wrapper.parents('.widget').length>0);var data={action:'wpw_fp_follow_author',status:status,authorid:authorid,currentpostid:currentpostid,email:email,onlyfollowing:onlyfollowing,data:form.serialize()};if(disable_reload){data.disable_reload=true;}follow_wrapper.find('.wpw_fp_follow_loader').show();follow_wrapper.find('.wpw-following-text').html(WpwFpPublic.processing);follow_wrapper.find('.wpw-unfollowing-text').html(WpwFpPublic.processing);jQuery.post(WpwFpPublic.ajaxurl,data,function(response){follow_wrapper.find('.wpw_fp_follow_loader').hide();if(response!='confirm'){if($.isNumeric(response)){follow_wrapper.find('.wpw_fp_followers_count').html(response);}if(WpwFpPublic.loginflag=='1'){if(status=='1'){follow_wrapper.find('.wpw-following-text').html(following);follow_wrapper.find('.wpw-fp-follow-btn').attr('data-status','0');follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-follow-button').addClass('wpw-fp-following-button');}else{if(onlyfollowing==1){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-authors').html();jQuery('.wpw-fp-manage-follow-authors').html(newresponse);}else{follow_wrapper.find('.wpw-following-text').html(follow);follow_wrapper.find('.wpw-fp-follow-btn').attr('data-status','1');follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-following-button').addClass('wpw-fp-follow-button');}}}else{follow_wrapper.find('.wpw-following-text').html(follow);follow_wrapper.find('.wpw-unfollowing-text').html(unfollow);follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-following-button').addClass('wpw-fp-follow-button');if(disable_reload){if(!$.isNumeric(response)){$('.message_stack_success, .message_stack_error').remove();$('<div class="message_stack_error">'+response+'<div>').insertBefore(follow_wrapper);}else{$('.message_stack_success, .message_stack_error').remove();$('<div class="message_stack_success">'+WpwFpPublic.follow_success+'<div>').insertBefore(follow_wrapper);}if(follow_wrapper.find('.wpw-fp-popup-close').length>0){follow_wrapper.find('.wpw-fp-popup-close').click();}}else{var msgs={};if(!$.isNumeric(response)){msgs={authorid:authorid,msgs:response};}else{msgs={authorid:authorid,msgs:WpwFpPublic.follow_success}}Cookies.set('wpw-fp-follow-author-msgs',JSON.stringify(msgs));window.location.reload();}}}else{if(WpwFpPublic.loginflag=='1'||disable_reload){$('.message_stack_success').remove();$('<div class="message_stack_success">'+WpwFpPublic.checkemail+'<div>').insertBefore(follow_wrapper);follow_wrapper.find('.wpw-following-text').html(follow);if(follow_wrapper.find('.wpw-fp-popup-close').length>0){follow_wrapper.find('.wpw-fp-popup-close').click();}}else{var msgs={authorid:authorid,msgs:WpwFpPublic.checkemail};Cookies.set('wpw-fp-follow-author-msgs',JSON.stringify(msgs));follow_wrapper.find('.wpw-following-text').html(follow);window.location.reload();}}var follow_wrapper_obj={this_object:follow_wrapper};follow_wrapper.trigger("wpw-fp-follow-author-btn-reload",[follow_wrapper_obj]);follow_wrapper.find('.wpw-fp-follow-btn').removeClass('wpw-fp-unfollow-button').addClass('wpw-fp-follow-button');follow_wrapper.find('.wpw-following-text').removeClass('wpw-fp-display-none');follow_wrapper.find('.wpw-unfollowing-text').addClass('wpw-fp-display-none').removeClass('wpw-fp-display-inline');follow_wrapper.find('.wpw-unfollowing-text').html(unfollow);});});var authorMsgs=Cookies.get('wpw-fp-follow-author-msgs');if(authorMsgs){msgs=$.parseJSON(authorMsgs);var thisObj=$('button[data-author-id="'+msgs.authorid+'"]');var follow_wrapper=thisObj.parents('.wpw-fp-follow-post-wrapper');$('<div class="message_stack_success">'+msgs.msgs+'<div>').insertBefore(follow_wrapper);Cookies.remove('wpw-fp-follow-author-msgs');}$(document).on("click",".wpw-fp-popup-close, .wpw-fp-popup-overlay",function(){$('.wpw-fp-follow-popup').slideUp('slow');$('.wpw-fp-popup-overlay').fadeOut('slow');});$(document).on("click","#wpw_fp_unsubscribe_submit",function(){$('.wpw-fp-unsubscribe-email-error').removeClass('message_stack_error').html('').hide();$('#wpw_fp_unsubscribe_email').removeClass('wpw_fp_email_error');$('.message_stack_success').hide();$('.message_stack_error').hide();var email=$.trim($('#wpw_fp_unsubscribe_email').val());if(email==''){$('.wpw-fp-unsubscribe-email-error').addClass('message_stack_error').html(WpwFpPublic.emailempty).show();$('#wpw_fp_unsubscribe_email').addClass('wpw_fp_email_error').show();return false;}else{if(!wpw_fp_valid_email(email)){$('.wpw-fp-unsubscribe-email-error').addClass('message_stack_error').html(WpwFpPublic.emailinvalid).show();$('#wpw_fp_unsubscribe_email').addClass('wpw_fp_email_error').show();return false;}}});$(document).on("click",".wpw-fb-cb-posts",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-posts');if($(this).is(':checked')){follow_wrapper.find('.wpw-fp-cb-post').each(function(){follow_wrapper.find(this).attr('checked',true);});follow_wrapper.find('.wpw-fp-cb-posts-1').attr('checked',true);follow_wrapper.find('.wpw-fp-cb-posts-2').attr('checked',true);}else{follow_wrapper.find('.wpw-fp-cb-post').each(function(){follow_wrapper.find(this).attr('checked',false);});follow_wrapper.find('.wpw-fp-cb-posts-1').attr('checked',false);follow_wrapper.find('.wpw-fp-cb-posts-2').attr('checked',false);}});$(document).on("click",".wpw-fp-cb-post",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-posts');if(!($(this).is(':checked'))){follow_wrapper.find('.wpw-fp-cb-posts-1').attr('checked',false);follow_wrapper.find('.wpw-fp-cb-posts-2').attr('checked',false);}});$(document).on("click",".wpw-fp-bulk-action-post-btn",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-posts');var bulkaction=follow_wrapper.find('.wpw-fp-bulk-action').val();var pid=follow_wrapper.find('.wpw-fp-bulk-paging').val();var ids=',';follow_wrapper.find('.wpw-fp-cb-post').each(function(){if($(this).is(':checked')){ids+=$(this).val()+',';}});if(bulkaction!=''&&ids!=','){var data={action:'wpw_fp_bulk_action_post',bulkaction:bulkaction,ids:ids,paging:pid};follow_wrapper.find('.wpw-fp-bulk-action-loader').show();jQuery.post(WpwFpPublic.ajaxurl,data,function(response){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-posts').html();follow_wrapper.find('.wpw-fp-bulk-action-loader').hide();jQuery('.wpw-fp-manage-follow-posts').html(newresponse);});}return false;});$(document).on("click",".wpw-fb-cb-terms",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-terms');if($(this).is(':checked')){follow_wrapper.find('.wpw-fp-cb-term').each(function(){follow_wrapper.find(this).attr('checked',true);});follow_wrapper.find('.wpw-fp-cb-terms-1').attr('checked',true);follow_wrapper.find('.wpw-fp-cb-terms-2').attr('checked',true);}else{follow_wrapper.find('.wpw-fp-cb-term').each(function(){follow_wrapper.find(this).attr('checked',false);});follow_wrapper.find('.wpw-fp-cb-terms-1').attr('checked',false);follow_wrapper.find('.wpw-fp-cb-terms-2').attr('checked',false);}});$(document).on("click",".wpw-fp-cb-term",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-terms');if(!($(this).is(':checked'))){follow_wrapper.find('.wpw-fp-cb-terms-1').attr('checked',false);follow_wrapper.find('.wpw-fp-cb-terms-2').attr('checked',false);}});$(document).on("click",".wpw-fp-bulk-action-term-btn",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-terms');var bulkaction=follow_wrapper.find('.wpw-fp-bulk-action').val();var pid=follow_wrapper.find('.wpw-fp-bulk-paging').val();var ids=',';follow_wrapper.find('.wpw-fp-cb-term').each(function(){if($(this).is(':checked')){ids+=$(this).val()+',';}});if(bulkaction!=''&&ids!=','){var data={action:'wpw_fp_bulk_action_term',bulkaction:bulkaction,ids:ids,paging:pid};follow_wrapper.find('.wpw-fp-bulk-action-loader').show();jQuery.post(WpwFpPublic.ajaxurl,data,function(response){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-terms').html();follow_wrapper.find('.wpw-fp-bulk-action-loader').hide();jQuery('.wpw-fp-manage-follow-terms').html(newresponse);});}return false;});$(document).on("click",".wpw-fb-cb-authors",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-authors');if($(this).is(':checked')){follow_wrapper.find('.wpw-fp-cb-author').each(function(){follow_wrapper.find(this).attr('checked',true);});follow_wrapper.find('.wpw-fp-cb-authors-1').attr('checked',true);follow_wrapper.find('.wpw-fp-cb-authors-2').attr('checked',true);}else{follow_wrapper.find('.wpw-fp-cb-author').each(function(){follow_wrapper.find(this).attr('checked',false);});follow_wrapper.find('.wpw-fp-cb-authors-1').attr('checked',false);follow_wrapper.find('.wpw-fp-cb-authors-2').attr('checked',false);}});$(document).on("click",".wpw-fp-cb-author",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-authors');if(!($(this).is(':checked'))){follow_wrapper.find('.wpw-fp-cb-authors-1').attr('checked',false);follow_wrapper.find('.wpw-fp-cb-authors-2').attr('checked',false);}});$(document).on("click",".wpw-fp-bulk-action-author-btn",function(){var follow_wrapper=$(this).parents('.wpw-fp-manage-follow-authors');var bulkaction=follow_wrapper.find('.wpw-fp-bulk-action').val();var pid=follow_wrapper.find('.wpw-fp-bulk-paging').val();var ids=',';follow_wrapper.find('.wpw-fp-cb-author').each(function(){if($(this).is(':checked')){ids+=$(this).val()+',';}});if(bulkaction!=''&&ids!=','){var data={action:'wpw_fp_bulk_action_author',bulkaction:bulkaction,ids:ids,paging:pid};follow_wrapper.find('.wpw-fp-bulk-action-loader').show();jQuery.post(WpwFpPublic.ajaxurl,data,function(response){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-authors').html();follow_wrapper.find('.wpw-fp-bulk-action-loader').hide();jQuery('.wpw-fp-manage-follow-authors').html(newresponse);});}return false;});});function wpw_fp_follow_post_ajax_pagination(pid){var data={action:'wpw_fp_follow_post_next_page',paging:pid};jQuery('.wpw-fp-follow-posts-loader').show();jQuery('.wpw-fp-follow-posts-paging').hide();jQuery.post(WpwFpPublic.ajaxurl,data,function(response){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-posts').html();jQuery('.wpw-fp-follow-posts-loader').hide();jQuery('.wpw-fp-manage-follow-posts').html(newresponse);});return false;}function wpw_fp_follow_author_ajax_pagination(pid){var data={action:'wpw_fp_follow_author_next_page',paging:pid};jQuery('.wpw-fp-follow-authors-loader').show();jQuery('.wpw-fp-follow-authors-paging').hide();jQuery.post(WpwFpPublic.ajaxurl,data,function(response){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-authors').html();jQuery('.wpw-fp-follow-authors-loader').hide();jQuery('.wpw-fp-manage-follow-authors').html(newresponse);});return false;}function wpw_fp_follow_term_ajax_pagination(pid){var data={action:'wpw_fp_follow_term_next_page',paging:pid};jQuery('.wpw-fp-follow-terms-loader').show();jQuery('.wpw-fp-follow-terms-paging').hide();jQuery.post(WpwFpPublic.ajaxurl,data,function(response){var newresponse=jQuery(response).filter('.wpw-fp-manage-follow-terms').html();jQuery('.wpw-fp-follow-terms-loader').hide();jQuery('.wpw-fp-manage-follow-terms').html(newresponse);});return false;}function wpw_fp_valid_email(emailStr){var checkTLD=1;var knownDomsPat=/^(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum)$/;var emailPat=/(?:((?:[\w-]+(?:\.[\w-]+)*)@(?:(?:[\w-]+\.)*\w[\w-]{0,66})\.(?:[a-z]{2,6}(?:\.[a-z]{2})?));*)/g;var specialChars="\\(\\)><@,;:\\\\\\\"\\.\\[\\]";var validChars="\[^\\s"+specialChars+"\]";var quotedUser="(\"[^\"]*\")";var ipDomainPat=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/;var atom=validChars+'+';var word="("+atom+"|"+quotedUser+")";var userPat=new RegExp("^"+word+"(\\."+word+")*$");var domainPat=new RegExp("^"+atom+"(\\."+atom+")*$");var pattern=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;var matchArray=emailStr.match(emailPat);if(matchArray){return true;}if(matchArray==null){return false;}var user=matchArray[1];var domain=matchArray[2];for(i=0;i<user.length;i++){if(user.charCodeAt(i)>127){return false;}}for(i=0;i<domain.length;i++){if(domain.charCodeAt(i)>127){return false;}}if(user.match(userPat)==null){return false;}var IPArray=domain.match(ipDomainPat);if(IPArray!=null){for(var i=1;i<=4;i++){if(IPArray[i]>255){return false;}}return true;}var atomPat=new RegExp("^"+atom+"$");var domArr=domain.split(".");var len=domArr.length;for(i=0;i<len;i++){if(domArr[i].search(atomPat)==-1){return false;}}if(checkTLD&&domArr[domArr.length-1].length!=2&&domArr[domArr.length-1].search(knownDomsPat)==-1){return false;}if(len<2){return false;}return true;}